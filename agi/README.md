# AGI v0.1

```
agi/
├── README.md
├── pyproject.toml
├── src/
│   ├── core/
│   │   ├── orchestrator.py
│   │   ├── world_model.py
│   │   ├── planner.py
│   │   ├── critic.py
│   │   ├── memory.py
│   │   └── tools/
│   │       ├── python_runner.py
│   │       ├── calculator.py
│   │       ├── retrieval.py
│   │       └── sim_physics.py
│   ├── governance/
│   │   ├── policy.yaml
│   │   └── gatekeeper.py
│   └── evals/
│       ├── harness.py
│       └── tasks/
│           ├── math_small.jsonl
│           ├── planning_small.jsonl
│           └── sim_causal.jsonl
├── notebooks/
├── artifacts/
└── tests/
    ├── test_memory.py
    ├── test_planner_contract.py
    └── test_tools_contract.py
```

## Getting Started

Create and activate a virtual environment, then install dependencies:

```bash
python -m venv .venv
source .venv/bin/activate
pip install -e .[dev]
```

Run the full test suite:

```bash
pytest
```

Run the evaluation harness:

```bash
python -m agi.src.evals.harness
```

The canonical JSON schema for orchestrator manifests lives at
`src/core/schemas/run_manifest.schema.json`. Regenerate it with
`agi-cli manifest schema` if you update the model. Manifests now capture a
`plans` section describing hierarchical execution (sub-goals, branch decisions,
timing) together with per-step agent assignments, so regenerate the schema
whenever that structure changes.

Artifacts generated by the agent are stored under `artifacts/` with run manifests.

## CLI Utilities

After installing the project (or when working from the repository), you can use the bundled Typer CLI:

```bash
agi-cli --help
```

Useful commands:

- `agi-cli manifest validate path/to/manifest.json` – validate orchestrator manifests against the Pydantic schema.
- `agi-cli manifest schema path/to/schema.json` – write the JSON schema describing the manifest structure.
- `agi-cli manifest summary path/to/manifest.json --sample 5` – emit a condensed JSON summary of run outcomes, plan hierarchy, collaborating agents, and safety events.
- `agi-cli tools catalog path/to/manifest.json --tier T1` – list tool capabilities and sensor profiles captured in a manifest.
- `agi-cli memory recent path/to/memory.jsonl --limit 10` – show the latest episodic memory entries (filter by `--type` as needed).
- `agi-cli memory recent path/to/memory.jsonl --type negotiation --limit 5` – inspect the most recent multi-agent negotiation transcripts with collaboration metadata.
- `agi-cli memory search path/to/memory.jsonl "lunar habitat"` – run a lexical semantic search across memory records.
- `agi-cli memory reflect path/to/memory.jsonl --goal goal-name --write-back` – aggregate reflection insights, optionally persisting a summary.
- `agi-cli memory timeline path/to/memory.jsonl --limit 20 --type reflection` – view a chronological slice with coverage metadata.
- `agi-cli memory replay path/to/manifest.json --working path/to/working_memory.json` – generate an experience replay chunk combining manifest and working-memory insights.
- `agi-cli working summarize path/to/working_memory.json` – summarise deliberation attempts captured in working-memory snapshots.
- `agi-cli run inspect path/to/run_dir --memory path/to/memory.jsonl` – inspect a run directory with manifest (including plan hierarchy and agent assignments), working memory, and optional contextual memory snippets.
- `agi-cli world beliefs artifacts/state/beliefs.json --detail --limit 5` – review current credence, variance, and supporting evidence for recorded claims.
- `agi-cli oversight serve --artifacts artifacts/` – launch the FastAPI oversight console with run manifests, telemetry, memory logs, and a live approval queue for interactive gatekeeping. Open `http://localhost:8080/` to use the browser dashboard (state persists to `artifacts/oversight.db`).

Useful environment toggles:

```bash
# disable the working/episodic memory integration if you want purely stateless runs
export AGI_ENABLE_MEMORY=0
```

Re-enable memory (the default) with `AGI_ENABLE_MEMORY=1`.

## Memory subsystem

AGI can operate with an optional working/episodic memory stack. The
orchestrator hydrates working memory before each tool call and persists
significant episodes for future recall when the feature is enabled. Refer to the
[memory guide](docs/memory.md) for a detailed walkthrough of the execution
lifecycle, runtime toggles, and targeted tests that validate the behaviour.

## Multi-agent collaboration

The orchestrator can coordinate multiple specialised agents. Planner outputs may
assign an `agent` to each step, and manifests capture which agent executed every
tool call. When constructing an orchestrator you can provide additional agent
contexts (`agents={\"builder\": {\"tools\": {...}}}`); any agent marked
`default: true` in planner responses aliases the primary tool sandbox
automatically.

## Keeping the branch in sync

The project’s `work` branch is expected to stay rebased on top of `main`.
Consult the [merge guide](docs/merging.md) for a step-by-step checklist that
covers stashing local edits, fetching the latest upstream history, resolving
conflicts, and verifying that the merge guard tests pass.

## CLI Utilities

After installing the project (or when working from the repository), you can use the bundled Typer CLI:

```bash
agi-cli --help
```

Useful commands:

- `agi-cli manifest validate path/to/manifest.json` – validate orchestrator manifests against the Pydantic schema.
- `agi-cli manifest schema path/to/schema.json` – write the JSON schema describing the manifest structure.
- `agi-cli manifest summary path/to/manifest.json --sample 5` – emit a condensed JSON summary of run outcomes, plan hierarchy, and safety events.
- `agi-cli tools catalog path/to/manifest.json --tier T1` – list tool capabilities and sensor profiles captured in a manifest.
- `agi-cli memory recent path/to/memory.jsonl --limit 10` – show the latest episodic memory entries (filter by `--type` as needed).
- `agi-cli memory search path/to/memory.jsonl "lunar habitat"` – run a lexical semantic search across memory records.
- `agi-cli memory reflect path/to/memory.jsonl --goal goal-name --write-back` – aggregate reflection insights, optionally persisting a summary.
- `agi-cli memory timeline path/to/memory.jsonl --limit 20 --type reflection` – view a chronological slice with coverage metadata.
- `agi-cli memory replay path/to/manifest.json --working path/to/working_memory.json` – generate an experience replay chunk combining manifest and working-memory insights.
- `agi-cli working summarize path/to/working_memory.json` – summarise deliberation attempts captured in working-memory snapshots.
- `agi-cli run inspect path/to/run_dir --memory path/to/memory.jsonl` – inspect a run directory with manifest (including plan hierarchy), working memory, and optional contextual memory snippets.

## Roadmap

See [docs/ROADMAP.md](docs/ROADMAP.md) for the multi-phase roadmap guiding future
capability, safety, and governance development, and
[docs/PUTNAM_ARCHITECTURE.md](docs/PUTNAM_ARCHITECTURE.md) for a layered cognitive
architecture that maps Peter Putnam's inspiration onto the codebase.

Additional guides:

- [docs/memory.md](docs/memory.md) – working/episodic memory lifecycle, CLI walkthroughs, and targeted tests.
- [docs/merging.md](docs/merging.md) – branch refresh checklist that keeps the merge guard green.
